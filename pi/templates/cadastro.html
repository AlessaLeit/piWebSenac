{% load static %}

<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cadastrar - Casa das Pizzas</title>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link rel="stylesheet" href="{% static 'css/estilo.css' %}">
    </head>
    <body>
        <div class="container">
        <!-- Cabeçalho -->
        <header class="header">
            <p>Canoinhas - SC</p>
            <h1>
            <img src="{% static 'logo.jpg' %}" alt="Logo" class="logo">
            Casa das Pizzas
            </h1>
            <p>Crie uma conta</p>

            <div class="botoes-container">
            <button id="toggle-contrast" class="botao"><i class="fas fa-adjust"></i></button>
            <a href="/tamanho" class="botao" id="btn-entrar"><i class="fas fa-home"></i></a>
            {% if user.is_authenticated %}
              <a href="{% url 'pedido:logout' %}" class="botao" id="btn-logout"><i class="fas fa-sign-out-alt"></i></a>
            {% endif %}
            </div>
        </header>

            <section class="secao-formulario">
                <h2><i class="fas fa-sign-in-alt"></i> Cadastro</h2>
                <form method="post">
                    {% csrf_token %}
                    {% if erro %}
                        <div class="alerta-erro">
                            <i class="fas fa-exclamation-triangle"></i> {{ erro }}
                        </div>
                    {% endif %}
                    <div class="campo-endereco">
                        <label for="nome">Nome</label>
                        <input type="text" id="nome" name="nome" value="{{ form_data.nome }}" required>
                    </div>
                    <div class="campo-endereco">
                        <label for="cpf">CPF</label>
                        <input type="text" id="cpf" name="cpf" value="{{ form_data.cpf }}" required>
                    </div>
                    <div class="campo-endereco">
                        <label for="telefone">Telefone</label>
                        <input type="text" id="telefone" name="telefone" value="{{ form_data.telefone }}" required maxlength="15">
                    </div>
                    <div class="campo-endereco">
                        <label for="endereco">Endereço:</label>
                        <input type="text" id="endereco" name="endereco" value="{{ form_data.endereco }}">
                    </div>
                    <div class="campo-endereco">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" value="{{ form_data.email }}" required>
                    </div>
                    <div class="campo-endereco">
                        <label for="senha">Senha:</label>
                        <div class="password-container">
                            <input type="password" id="senha" name="senha" required>
                            <button type="button" id="toggle-password-senha" class="eye-button"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                    <div class="campo-endereco">
                        <label for="confirmarsenha">Confirmar Senha:</label>
                        <div class="password-container">
                            <input type="password" id="confirmarsenha" name="confirmarsenha" required>
                            <button type="button" id="toggle-password-confirmar" class="eye-button"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                    <button type="submit" class="botao">Cadastrar</button>
                </form>
            </section>
        </div>

        <script>
          // Toggle high contrast mode and save preference in localStorage
          const toggleButton = document.getElementById('toggle-contrast');
          const body = document.body;

          function setContrastMode(enabled) {
            if (enabled) {
              body.classList.add('high-contrast');
              localStorage.setItem('highContrast', 'true');
            } else {
              body.classList.remove('high-contrast');
              localStorage.setItem('highContrast', 'false');

            }
          }

          toggleButton.addEventListener('click', () => {
            const isEnabled = body.classList.contains('high-contrast');
            setContrastMode(!isEnabled);
          });

          // On page load, check saved preference
          document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('highContrast');
            if (saved === 'true') {
              setContrastMode(true);
            } else {
              setContrastMode(false);
            }
          });

          // Formatação automática do telefone
          document.getElementById('telefone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove tudo que não é dígito
            if (value.length <= 11) {
              if (value.length <= 2) {
                value = value;
              } else if (value.length <= 6) {
                value = `(${value.slice(0, 2)}) ${value.slice(2)}`;
              } else if (value.length <= 10) {
                value = `(${value.slice(0, 2)}) ${value.slice(2, 6)}-${value.slice(6)}`;
              } else {
                value = `(${value.slice(0, 2)}) ${value.slice(2, 7)}-${value.slice(7)}`;
              }
            }
            e.target.value = value;
          });

          // Toggle password visibility for senha
          const togglePasswordSenhaButton = document.getElementById('toggle-password-senha');
          const senhaInput = document.getElementById('senha');

          togglePasswordSenhaButton.addEventListener('click', () => {
            const type = senhaInput.getAttribute('type') === 'password' ? 'text' : 'password';
            senhaInput.setAttribute('type', type);
            if (type === 'text') {
              togglePasswordSenhaButton.classList.add('visible');
            } else {
              togglePasswordSenhaButton.classList.remove('visible');
            }
          });

          // Toggle password visibility for confirmar senha
          const togglePasswordConfirmarButton = document.getElementById('toggle-password-confirmar');
          const confirmarSenhaInput = document.getElementById('confirmarsenha');

          togglePasswordConfirmarButton.addEventListener('click', () => {
            const type = confirmarSenhaInput.getAttribute('type') === 'password' ? 'text' : 'password';
            confirmarSenhaInput.setAttribute('type', type);
            if (type === 'text') {
              togglePasswordConfirmarButton.classList.add('visible');
            } else {
              togglePasswordConfirmarButton.classList.remove('visible');
            }
          });
        </script>
    </body>
    <footer class="rodape">
      <div class="redes-sociais">
        <a href="https://www.instagram.com/casadaspizzas_oficial?igsh=MTRzdzRmeGwzZTQ0ZA==" target="_blank"><img src="{% static 'instagram.png' %}" alt="Instagram"></a>
        <a href="https://www.facebook.com/Casadaspizza1/" target="_blank"><img src="{% static 'facebook.png'%}" alt="Facebook"></a>
      </div>
      <p class="direitos">TODOS OS DIREITOS RESERVADOS © 2025 CASA DAS PIZZAS</p>
    </footer>
</html>
